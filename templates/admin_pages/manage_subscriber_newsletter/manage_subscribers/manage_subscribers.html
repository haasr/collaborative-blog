{% extends "../../admin_pages_base.html" %}

{% load static %}

{% block content %}
<div class="d-flex justify-content-center mt-4 mb-4">
    <a href="{% url 'admin_pages:admin_index' %}">
        <button class="btn btn-warning">&#60; Back to Menu</button>
    </a>
</div>

<div class="container" style="background-color: #858383; border-radius: 5px;">
    <h1 class="text-center text-white pt-3 pb-3">Manage Subscribers</h1>
    <div class="container pad-container shadow" style="background-color: #B3BBC3; border-radius: 5px;">
        <div class="pt-3 pb-3 shadow" id="email-subscribers-list"  style="background-color: #F1F1F1; border-radius: 5px;">
            <div class="title pad-container">Email Subscribers</div>
            <div class="d-flex justify-content-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" height="36" class="bi bi-search pl-1 pr-1" width="30">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
                <div style="width: 85%;"><input type="text" class="search" placeholder="Search by email or name"></div>
            </div>
            <ul class="list" style="margin-top: 15px;">
                {% for sub in subscribers %}
                <li class="mt-3 mr-4">
                    <div class="text-break"
                        style="border-radius: 5px; background-color: #DCDCDC;">
                        <div class="row">
                            <div class="col email text-break text-center fs-450 font-weight-bolder pt-3 pb-3">
                                {{ sub.email_addr }}
                            </div>
                        </div>
                        <div class="row flow p-2">
                            <div class="col-md" style="background-color: none;">
                                <div class="fs-400 font-weight-bolder">Name<hr></div>
                                <p class="name  highlight fs-300">
                                    {{ sub.first_name }} {{ sub.last_name }}
                                </p>
                                <hr>
                                <div class="fs-400 font-weight-bolder">Subscribed At<hr></div>
                                <p class="highlight fs-300">
                                    {{ sub.subscribed_at }}
                                </p>
                                <hr>
                            </div>
                            <div class="col-sm">
                                <div class="fs-400 font-weight-bolder">Actions<hr></div>
                                <a href="{% url 'admin_pages:confirm_delete_subscriber' sub.email_addr %}"><button class="btn btn-outline-danger">Delete</button></a>
                            </div>
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock content %}

{% block body_scripts %}
<script src="{% static 'admin_pages/js/collapse-container-toggler.js' %}"></script>
<script src="{% static 'js/list.js' %}"></script>
<script src="{% static 'admin_pages/js/email-subscribers-list.js'%}"></script>
{% endblock body_scripts %}